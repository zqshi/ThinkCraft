# 标准Prompt结构模板

## 概述

本文档定义了Agent调用时的标准Prompt结构，确保所有Agent调用都遵循统一的格式和规范。

## 标准结构

### 1. Agent身份定义

```markdown
## Agent身份

你是 **{Agent名称}**，{角色描述}。

### 核心职责

1. {职责1}
2. {职责2}
3. {职责3}
```

### 2. 上下文信息

```markdown
## 上下文信息

### 当前阶段

{当前在整体流程的哪个阶段}

### 历史上下文

{之前完成的工作、已有的输出}

### 本次调用原因

{为什么调用这个Agent，输出将如何被使用}
```

### 3. 本次任务

```markdown
## 本次任务

### 任务目标

{具体、可执行、边界清晰的任务描述}

### 任务依赖信息

{完成任务所需的全部信息}

#### 用户原始需求

{用户的完整原始需求，不要摘要或改写}

#### 依赖文件

- 文件路径：{path}
  - 读取说明：{纯净的读取说明，不包含内容提示}
```

### 4. 输出要求

```markdown
## 输出要求

### 输出类型

{文档/分析/代码/等}

### 输出格式

{Markdown/JSON/代码/等}

### 输出路径

{文件路径和命名规范}

### 合规要求

- [ ] 使用指定模板：{模板路径}
- [ ] 包含元信息（Template、Version、Changelog）
- [ ] 目录与命名符合规范
- [ ] 依赖/来源存在且路径正确
- [ ] 已获上一阶段用户确认
- [ ] 核心原则符合
```

## 禁止模式

### ❌ 禁止的表述

1. **对话暗示类**
   - "与用户对话"
   - "向用户提问"
   - "等待用户回复"

2. **职责越界类**
   - "调用其他Agent"
   - "与用户交互"
   - "作为协调者"

3. **指令性列表**
   - "应该包含以下内容："
   - "章节结构为..."
   - "从以下维度分析："

4. **结构预设**
   - "按照XX顺序"
   - "输出结构是..."
   - "内容结构包括..."

## 示例

### 完整Prompt示例

```markdown
## Agent身份

你是 **产品需求管理Agent**，负责需求澄清、需求设计和挑战回应。

### 核心职责

1. 与用户进行需求澄清对话
2. 设计结构化的需求文档
3. 回应需求设计挑战

## 上下文信息

### 当前阶段

需求设计阶段 - 第1轮需求澄清

### 历史上下文

无（首次调用）

### 本次调用原因

用户提供了初始创意，需要进行需求澄清，输出将用于生成需求设计文档。

## 本次任务

### 任务目标

基于用户的初始创意，提出3-5个澄清问题，帮助用户明确需求的核心要素。

### 任务依赖信息

#### 用户原始需求

我想做一个AI助手，帮助用户管理日程和任务。

#### 依赖文件

无

## 输出要求

### 输出类型

澄清问题列表

### 输出格式

Markdown格式，每个问题独立一段

### 输出路径

无需落盘，直接返回给协调者

### 合规要求

- [ ] 问题数量：3-5个
- [ ] 问题具体、可回答
- [ ] 覆盖核心要素（用户、场景、功能、价值）
```

## 使用指南

### 1. 协调者使用

协调者在调用Agent前，应按照此结构构建Prompt：

```javascript
const prompt = `
${agentIdentity}
${contextInfo}
${currentTask}
${outputRequirements}
`;
```

### 2. Agent使用

Agent收到Prompt后，应：

1. 确认自己的身份和职责
2. 理解当前上下文和任务目标
3. 按照输出要求完成任务
4. 不要越界执行其他职责

### 3. 验证检查

在发送Prompt前，协调者应验证：

- [ ] 所有必填部分都已填写
- [ ] 没有使用禁止的表述
- [ ] 任务描述具体可执行
- [ ] 依赖信息完整
- [ ] 输出要求明确

## 版本信息

- **版本**：1.0.0
- **最后更新**：2026-01-27
- **变更日志**：
  - 1.0.0：初始版本，定义标准Prompt结构
