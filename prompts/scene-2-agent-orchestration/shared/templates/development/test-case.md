# 测试用例模板

> 功能/Prompt/工具测试用例

---

## 模板元信息

**Template**: 测试用例模板
**Version**: v1.0
**适用场景**: 开发阶段 - 测试用例编写
**输出文件命名**: `测试用例-{模块名称}-v{YYYYMMDDHHmmss}.md`

---

## 模板结构

```markdown
# 测试用例文档

---

**Template**: 测试用例模板
**Version**: v{YYYYMMDDHHmmss}
**Changelog**: {时间} - {修改人} - {修改原因摘要}

---

## 1. 文档信息

### 1.1 文档属性

- **产品名称**: [产品名称]
- **模块名称**: [模块名称]
- **文档版本**: v{YYYYMMDDHHmmss}
- **创建日期**: {YYYY-MM-DD}
- **创建人**: [创建人]
- **审核人**: [审核人]

### 1.2 依赖文档

- **测试计划**: [文档路径] - v{YYYYMMDDHHmmss}
- **需求设计文档**: [文档路径] - v{YYYYMMDDHHmmss}

---

## 2. 用例概述

### 2.1 测试范围

[说明本文档覆盖的测试范围]

### 2.2 用例统计

| 用例类型 | 数量 | 优先级分布 |
|---------|------|-----------|
| 功能用例 | [数量] | P0: x, P1: x, P2: x, P3: x |
| 性能用例 | [数量] | P0: x, P1: x, P2: x, P3: x |
| 安全用例 | [数量] | P0: x, P1: x, P2: x, P3: x |
| 兼容性用例 | [数量] | P0: x, P1: x, P2: x, P3: x |

### 2.3 需求覆盖

| 需求ID | 需求描述 | 对应用例 | 覆盖状态 |
|--------|---------|---------|---------|
| US-001 | [需求描述] | TC-001, TC-002 | 已覆盖 |
| US-002 | [需求描述] | TC-003, TC-004 | 已覆盖 |

---

## 3. 功能测试用例

### 3.1 认证模块

#### TC-001: 用户登录-正常流程

**用例属性**:
- **优先级**: P0
- **用例类型**: 功能测试
- **测试方法**: 手工测试
- **关联需求**: US-001

**前置条件**:
- 用户已注册
- 用户未登录
- 测试环境可访问

**测试步骤**:

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 打开登录页面 | 页面正常显示，包含用户名、密码输入框和登录按钮 |
| 2 | 输入正确的用户名: testuser | 用户名输入框显示输入内容 |
| 3 | 输入正确的密码: Test@123 | 密码输入框显示密码掩码 |
| 4 | 点击"登录"按钮 | 按钮显示加载状态 |
| 5 | 等待响应 | 登录成功，跳转到首页 |
| 6 | 验证登录状态 | 页面右上角显示用户名和头像 |

**预期结果**:
- 登录成功
- 跳转到首页
- 显示用户信息
- Token已保存到本地存储

**测试数据**:
```json
{
  "username": "testuser",
  "password": "Test@123"
}
```

**实际结果**: [测试时填写]

**测试状态**: [ ] Pass  [ ] Fail  [ ] Blocked  [ ] Skip

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述和缺陷ID]

---

#### TC-002: 用户登录-用户名错误

**用例属性**:
- **优先级**: P0
- **用例类型**: 功能测试-异常场景
- **测试方法**: 手工测试
- **关联需求**: US-001

**前置条件**:
- 用户未登录
- 测试环境可访问

**测试步骤**:

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 打开登录页面 | 页面正常显示 |
| 2 | 输入不存在的用户名: wronguser | 用户名输入框显示输入内容 |
| 3 | 输入任意密码: Test@123 | 密码输入框显示密码掩码 |
| 4 | 点击"登录"按钮 | 按钮显示加载状态 |
| 5 | 等待响应 | 显示错误提示："用户名或密码错误" |

**预期结果**:
- 登录失败
- 显示错误提示信息
- 用户名输入框标红
- 停留在登录页面

**测试数据**:
```json
{
  "username": "wronguser",
  "password": "Test@123"
}
```

**实际结果**: [测试时填写]

**测试状态**: [ ] Pass  [ ] Fail  [ ] Blocked  [ ] Skip

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述和缺陷ID]

---

#### TC-003: 用户登录-密码错误

**用例属性**:
- **优先级**: P0
- **用例类型**: 功能测试-异常场景
- **测试方法**: 手工测试
- **关联需求**: US-001

**前置条件**:
- 用户已注册
- 用户未登录

**测试步骤**:

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 打开登录页面 | 页面正常显示 |
| 2 | 输入正确的用户名: testuser | 用户名输入框显示输入内容 |
| 3 | 输入错误的密码: WrongPass@123 | 密码输入框显示密码掩码 |
| 4 | 点击"登录"按钮 | 按钮显示加载状态 |
| 5 | 等待响应 | 显示错误提示："用户名或密码错误" |

**预期结果**:
- 登录失败
- 显示错误提示信息
- 密码输入框标红
- 停留在登录页面

**测试数据**:
```json
{
  "username": "testuser",
  "password": "WrongPass@123"
}
```

**实际结果**: [测试时填写]

**测试状态**: [ ] Pass  [ ] Fail  [ ] Blocked  [ ] Skip

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述和缺陷ID]

---

#### TC-004: 用户登录-账号被锁定

**用例属性**:
- **优先级**: P1
- **用例类型**: 功能测试-异常场景
- **测试方法**: 手工测试
- **关联需求**: US-001

**前置条件**:
- 用户账号已被锁定（连续5次密码错误）
- 用户未登录

**测试步骤**:

| 步骤 | 操作 | 预期结果 |
|------|------|---------|
| 1 | 打开登录页面 | 页面正常显示 |
| 2 | 输入被锁定的用户名: lockeduser | 用户名输入框显示输入内容 |
| 3 | 输入正确的密码: Test@123 | 密码输入框显示密码掩码 |
| 4 | 点击"登录"按钮 | 按钮显示加载状态 |
| 5 | 等待响应 | 显示错误提示："账号已被锁定，请30分钟后重试或联系管理员" |

**预期结果**:
- 登录失败
- 显示账号锁定提示
- 提示解锁时间或联系方式
- 停留在登录页面

**测试数据**:
```json
{
  "username": "lockeduser",
  "password": "Test@123"
}
```

**实际结果**: [测试时填写]

**测试状态**: [ ] Pass  [ ] Fail  [ ] Blocked  [ ] Skip

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述和缺陷ID]

---

#### TC-005: 用户登录-输入验证

**用例属性**:
- **优先级**: P1
- **用例类型**: 功能测试-边界场景
- **测试方法**: 手工测试
- **关联需求**: US-001

**测试子用例**:

**5.1 用户名为空**:
- 输入: 用户名为空，密码: Test@123
- 预期: 显示提示"请输入用户名"，登录按钮禁用或点击无效

**5.2 密码为空**:
- 输入: 用户名: testuser，密码为空
- 预期: 显示提示"请输入密码"，登录按钮禁用或点击无效

**5.3 用户名和密码都为空**:
- 输入: 用户名和密码都为空
- 预期: 显示提示"请输入用户名和密码"，登录按钮禁用

**5.4 用户名包含特殊字符**:
- 输入: 用户名: test<script>，密码: Test@123
- 预期: 显示提示"用户名格式不正确"或自动过滤特殊字符

**5.5 密码长度不足**:
- 输入: 用户名: testuser，密码: 123
- 预期: 显示提示"密码长度至少8位"

**实际结果**: [测试时填写]

**测试状态**: [ ] Pass  [ ] Fail  [ ] Blocked  [ ] Skip

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述和缺陷ID]

---

### 3.2 业务模块1

#### TC-101: [用例标题]

[按照相同结构编写]

---

## 4. 性能测试用例

### PC-001: 首页加载性能测试

**用例属性**:
- **优先级**: P1
- **用例类型**: 性能测试
- **测试方法**: 自动化测试
- **测试工具**: Lighthouse/WebPageTest

**测试目标**:
验证首页加载性能是否满足要求

**性能指标**:

| 指标 | 目标值 | 测试方法 |
|------|--------|---------|
| FCP (First Contentful Paint) | <1.5s | Lighthouse |
| LCP (Largest Contentful Paint) | <2.5s | Lighthouse |
| TTI (Time to Interactive) | <3.5s | Lighthouse |
| CLS (Cumulative Layout Shift) | <0.1 | Lighthouse |
| 页面大小 | <2MB | Network面板 |

**测试步骤**:

1. 清除浏览器缓存
2. 打开首页
3. 使用Lighthouse进行性能测试
4. 记录各项性能指标
5. 对比目标值

**测试环境**:
- 网络: 4G网络模拟
- 设备: Desktop (1920x1080)
- 浏览器: Chrome最新版

**预期结果**:
所有性能指标满足目标值

**实际结果**: [测试时填写]

**测试数据**:
```json
{
  "FCP": "1.2s",
  "LCP": "2.1s",
  "TTI": "3.0s",
  "CLS": "0.05",
  "pageSize": "1.8MB"
}
```

**测试状态**: [ ] Pass  [ ] Fail  [ ] Blocked  [ ] Skip

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述]

---

### PC-002: API响应时间测试

**用例属性**:
- **优先级**: P0
- **用例类型**: 性能测试
- **测试方法**: 自动化测试
- **测试工具**: JMeter

**测试目标**:
验证核心API响应时间是否满足要求

**测试接口**:

| 接口 | 目标响应时间 | 并发数 |
|------|------------|--------|
| POST /api/auth/login | <200ms | 100 |
| GET /api/users/profile | <100ms | 100 |
| GET /api/dashboard/data | <300ms | 100 |
| POST /api/data/create | <500ms | 50 |

**测试步骤**:

1. 配置JMeter测试计划
2. 设置并发用户数
3. 执行压力测试
4. 收集响应时间数据
5. 分析测试结果

**预期结果**:
- 平均响应时间满足目标值
- 95%请求响应时间满足目标值
- 错误率<1%

**实际结果**: [测试时填写]

**测试数据**:
```json
{
  "avgResponseTime": "150ms",
  "p95ResponseTime": "280ms",
  "errorRate": "0.5%",
  "throughput": "500 req/s"
}
```

**测试状态**: [ ] Pass  [ ] Fail  [ ] Blocked  [ ] Skip

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述]

---

## 5. 安全测试用例

### SC-001: SQL注入测试

**用例属性**:
- **优先级**: P0
- **用例类型**: 安全测试
- **测试方法**: 手工测试 + 自动化工具
- **测试工具**: SQLMap

**测试目标**:
验证系统是否存在SQL注入漏洞

**测试场景**:

**5.1 登录接口SQL注入**:
- 测试点: 用户名输入框
- 注入payload: `admin' OR '1'='1`
- 预期: 登录失败，显示错误提示

**5.2 搜索接口SQL注入**:
- 测试点: 搜索关键词
- 注入payload: `' UNION SELECT * FROM users--`
- 预期: 搜索失败或返回空结果，不泄露数据库信息

**5.3 URL参数SQL注入**:
- 测试点: URL参数 id
- 注入payload: `?id=1' OR '1'='1`
- 预期: 返回错误或正常结果，不执行恶意SQL

**测试步骤**:

1. 识别所有用户输入点
2. 构造SQL注入payload
3. 提交恶意输入
4. 观察系统响应
5. 使用SQLMap自动化扫描

**预期结果**:
- 所有输入点都有SQL注入防护
- 恶意输入被过滤或转义
- 不泄露数据库错误信息
- 不执行恶意SQL语句

**实际结果**: [测试时填写]

**测试状态**: [ ] Pass  [ ] Fail  [ ] Blocked  [ ] Skip

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述和漏洞详情]

---

### SC-002: XSS攻击测试

**用例属性**:
- **优先级**: P0
- **用例类型**: 安全测试
- **测试方法**: 手工测试
- **测试工具**: Burp Suite

**测试目标**:
验证系统是否存在XSS漏洞

**测试场景**:

**2.1 反射型XSS**:
- 测试点: 搜索框
- 注入payload: `<script>alert('XSS')</script>`
- 预期: 脚本不执行，内容被转义显示

**2.2 存储型XSS**:
- 测试点: 评论输入框
- 注入payload: `<img src=x onerror=alert('XSS')>`
- 预期: 脚本不执行，内容被转义存储和显示

**2.3 DOM型XSS**:
- 测试点: URL参数
- 注入payload: `?name=<script>alert('XSS')</script>`
- 预期: 脚本不执行，参数被安全处理

**测试步骤**:

1. 识别所有用户输入点
2. 构造XSS payload
3. 提交恶意输入
4. 观察是否执行脚本
5. 检查输出是否被转义

**预期结果**:
- 所有输入点都有XSS防护
- 恶意脚本被转义或过滤
- 不执行任何JavaScript代码
- 使用CSP (Content Security Policy)

**实际结果**: [测试时填写]

**测试状态**: [ ] Pass  [ ] Fail  [ ] Blocked  [ ] Skip

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述和漏洞详情]

---

## 6. 兼容性测试用例

### CC-001: 浏览器兼容性测试

**用例属性**:
- **优先级**: P1
- **用例类型**: 兼容性测试
- **测试方法**: 手工测试

**测试目标**:
验证系统在不同浏览器下的兼容性

**测试矩阵**:

| 浏览器 | 版本 | 操作系统 | 测试功能 | 测试状态 |
|--------|------|---------|---------|---------|
| Chrome | 最新版 | Windows 10 | 全功能 | [ ] Pass [ ] Fail |
| Chrome | 最新版 | macOS | 全功能 | [ ] Pass [ ] Fail |
| Firefox | 最新版 | Windows 10 | 全功能 | [ ] Pass [ ] Fail |
| Safari | 最新版 | macOS | 全功能 | [ ] Pass [ ] Fail |
| Edge | 最新版 | Windows 10 | 全功能 | [ ] Pass [ ] Fail |

**测试内容**:
- 页面布局是否正常
- 功能是否正常工作
- 样式是否正确显示
- 交互是否流畅
- 是否有控制台错误

**预期结果**:
所有浏览器下功能正常，无明显兼容性问题

**实际结果**: [测试时填写]

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述]

---

### CC-002: 响应式布局测试

**用例属性**:
- **优先级**: P1
- **用例类型**: 兼容性测试
- **测试方法**: 手工测试

**测试目标**:
验证系统在不同设备和分辨率下的响应式布局

**测试矩阵**:

| 设备类型 | 分辨率 | 测试页面 | 测试状态 |
|---------|--------|---------|---------|
| Desktop | 1920x1080 | 全部页面 | [ ] Pass [ ] Fail |
| Desktop | 1366x768 | 全部页面 | [ ] Pass [ ] Fail |
| Tablet | 1024x768 | 全部页面 | [ ] Pass [ ] Fail |
| Mobile | 375x667 | 全部页面 | [ ] Pass [ ] Fail |
| Mobile | 414x896 | 全部页面 | [ ] Pass [ ] Fail |

**测试内容**:
- 布局是否自适应
- 内容是否完整显示
- 图片是否正常加载
- 交互元素是否可点击
- 滚动是否流畅

**预期结果**:
所有设备和分辨率下布局正常，用户体验良好

**实际结果**: [测试时填写]

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述]

---

## 7. 自动化测试用例

### AT-001: 登录流程自动化测试

**用例属性**:
- **优先级**: P0
- **用例类型**: 自动化测试
- **测试框架**: Cypress
- **测试文件**: `cypress/e2e/auth/login.cy.js`

**测试代码**:

```javascript
describe('用户登录', () => {
  beforeEach(() => {
    cy.visit('/login');
  });

  it('TC-001: 正常登录流程', () => {
    cy.get('[data-testid="username"]').type('testuser');
    cy.get('[data-testid="password"]').type('Test@123');
    cy.get('[data-testid="login-button"]').click();

    cy.url().should('include', '/dashboard');
    cy.get('[data-testid="user-avatar"]').should('be.visible');
    cy.get('[data-testid="username-display"]').should('contain', 'testuser');
  });

  it('TC-002: 用户名错误', () => {
    cy.get('[data-testid="username"]').type('wronguser');
    cy.get('[data-testid="password"]').type('Test@123');
    cy.get('[data-testid="login-button"]').click();

    cy.get('[data-testid="error-message"]')
      .should('be.visible')
      .and('contain', '用户名或密码错误');
  });

  it('TC-003: 密码错误', () => {
    cy.get('[data-testid="username"]').type('testuser');
    cy.get('[data-testid="password"]').type('WrongPass@123');
    cy.get('[data-testid="login-button"]').click();

    cy.get('[data-testid="error-message"]')
      .should('be.visible')
      .and('contain', '用户名或密码错误');
  });
});
```

**执行方式**:
```bash
npm run test:e2e
```

**预期结果**:
所有测试用例通过

**实际结果**: [测试时填写]

**测试状态**: [ ] Pass  [ ] Fail  [ ] Blocked  [ ] Skip

**执行人**: [姓名]

**执行时间**: {YYYY-MM-DD HH:mm:ss}

**备注**: [如有问题，记录问题描述]

---

## 8. 用例执行记录

### 8.1 执行统计

| 日期 | 执行人 | 执行用例数 | 通过 | 失败 | 阻塞 | 跳过 | 通过率 |
|------|--------|-----------|------|------|------|------|--------|
| {YYYY-MM-DD} | [姓名] | 50 | 45 | 3 | 1 | 1 | 90% |

### 8.2 缺陷统计

| 缺陷ID | 缺陷标题 | 严重程度 | 状态 | 关联用例 |
|--------|---------|---------|------|---------|
| BUG-001 | [缺陷标题] | P1 | Open | TC-002 |
| BUG-002 | [缺陷标题] | P2 | Fixed | TC-005 |

---

## 合规自检

- [ ] 用例覆盖所有需求
- [ ] 用例步骤清晰明确
- [ ] 预期结果具体可验证
- [ ] 测试数据准备充分
- [ ] 优先级划分合理
- [ ] 用例之间相互独立
- [ ] 包含正常、异常、边界场景
- [ ] 自动化用例可执行
- [ ] 包含必要的元信息

---

**文档生成完成，版本号：v{YYYYMMDDHHmmss}**
```

---

## 使用说明

### 何时使用？

- 测试计划完成后
- 开始编写测试用例时
- 需要规范测试用例格式时

### 填写要点

1. **步骤清晰**: 测试步骤要清晰明确，可重复执行
2. **结果具体**: 预期结果要具体可验证
3. **数据准备**: 测试数据要准备充分
4. **场景覆盖**: 覆盖正常、异常、边界场景
5. **优先级合理**: 按优先级组织用例

### 用例编写原则

- **独立性**: 用例之间相互独立
- **可重复性**: 用例可重复执行
- **可追溯性**: 用例与需求对应
- **完整性**: 覆盖所有功能点

### 后续流程

1. 基于测试用例执行测试
2. 记录测试结果
3. 提交缺陷
4. 产出测试报告

---

## 相关模板

- **上一步**: [测试计划模板](./test-plan.md)
- **下一步**: [测试报告模板](./test-report.md)
- **参考**: [需求设计文档模板](../demand-design/design-doc-traditional.md)
