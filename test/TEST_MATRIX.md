# 全场景测试矩阵

本矩阵用于覆盖单元/集成/E2E/安全/性能基线，确保覆盖率与投产要求一致。

## 单元测试（Unit）

| 模块 | 覆盖项 | 关键场景 |
| --- | --- | --- |
| Auth | DTO/用例/令牌校验 | 手机号+验证码登录/注册、刷新令牌、账户注销 |
| Chat | 用例/领域 | 创建/发送/搜索/归档/合并/统计 |
| Report | 用例/领域 | 创建/添加章节/生成/归档/导出格式 |
| Share | 用例/领域 | 创建/访问/更新/撤销/批量/清理过期 |
| PDF Export | 用例/领域 | 创建/处理/下载/删除 |
| Business Plan | 用例/领域 | 创建/生成章节/批量生成/完成 |
| Projects | 用例/领域 | 创建/更新/升级/搜索/统计 |
| Agents | 用例/领域 | 创建/更新/激活/停用/删除 |

## 集成测试（Integration）

| 目标 | 覆盖项 | 关键场景 |
| --- | --- | --- |
| Auth Routes | 路由 + 控制器 | /api/auth/login/register 正常响应 |

## E2E（端到端）

| 目标 | 覆盖项 | 关键场景 |
| --- | --- | --- |
| 健康检查 | 服务连通性 | /health /api/health /404 |

## 安全基线（Security）

| 目标 | 覆盖项 | 关键场景 |
| --- | --- | --- |
| 鉴权 | 未授权/无效令牌 | /api/auth/me 401 |

## 性能基线（Performance）

| 目标 | 覆盖项 | 基线 |
| --- | --- | --- |
| 健康检查 | 平均响应 | 10次请求平均 < 1000ms |

## 覆盖率要求

- 全局覆盖率 >= 90%
- 关键路径（认证/报告/导出） >= 95%
