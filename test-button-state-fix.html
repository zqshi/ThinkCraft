<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‰é’®çŠ¶æ€ä¿®å¤æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h2 {
            margin-top: 0;
            color: #333;
        }
        .btn-primary {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-idle {
            background: #007bff;
            color: white;
        }
        .btn-generating {
            background: #ffc107;
            color: #333;
            animation: pulse 1.5s infinite;
        }
        .btn-completed {
            background: #28a745;
            color: white;
        }
        .btn-error {
            background: #dc3545;
            color: white;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .log {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
        .log-entry {
            margin: 4px 0;
            padding: 4px;
            border-left: 3px solid #007bff;
            padding-left: 8px;
        }
        .log-entry.success {
            border-left-color: #28a745;
            background: #d4edda;
        }
        .log-entry.error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
        .test-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="test-section">
        <h2>ğŸ”§ æŒ‰é’®çŠ¶æ€ä¿®å¤æµ‹è¯•</h2>
        <p>æµ‹è¯•åœºæ™¯ï¼šç‚¹å‡»ç”ŸæˆæŒ‰é’®åï¼Œå¼¹çª—å…³é—­ï¼ŒæŒ‰é’®åº”ç«‹å³æ˜¾ç¤º"ç”Ÿæˆä¸­"çŠ¶æ€</p>

        <div style="margin: 20px 0;">
            <button id="businessPlanBtn" class="btn-primary btn-idle" data-type="business" data-status="idle">
                <span class="btn-icon">ğŸ“Š</span>
                <span class="btn-text">å•†ä¸šè®¡åˆ’ä¹¦</span>
            </button>

            <button id="proposalBtn" class="btn-primary btn-idle" data-type="proposal" data-status="idle" style="margin-left: 10px;">
                <span class="btn-icon">ğŸ“‹</span>
                <span class="btn-text">äº§å“ç«‹é¡¹ææ–™</span>
            </button>
        </div>

        <div class="test-controls">
            <button onclick="testButtonStateChange('business', 'generating')">æµ‹è¯•ï¼šå•†ä¸šè®¡åˆ’ä¹¦ â†’ ç”Ÿæˆä¸­</button>
            <button onclick="testButtonStateChange('business', 'completed')">æµ‹è¯•ï¼šå•†ä¸šè®¡åˆ’ä¹¦ â†’ å·²å®Œæˆ</button>
            <button onclick="testButtonStateChange('business', 'error')">æµ‹è¯•ï¼šå•†ä¸šè®¡åˆ’ä¹¦ â†’ é”™è¯¯</button>
            <button onclick="testButtonStateChange('business', 'idle')">é‡ç½®</button>
        </div>

        <div class="log" id="testLog"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ“‹ ä¿®å¤è¯´æ˜</h2>
        <ul>
            <li><strong>é—®é¢˜</strong>ï¼šç‚¹å‡»ç”ŸæˆæŒ‰é’®åï¼Œå¼¹çª—å…³é—­ï¼Œä½†æŒ‰é’®çŠ¶æ€æ²¡æœ‰ç«‹å³æ›´æ–°ä¸º"ç”Ÿæˆä¸­"</li>
            <li><strong>åŸå› </strong>ï¼šçŠ¶æ€æ›´æ–°ä¾èµ–è®¢é˜…æœºåˆ¶ï¼Œä½†è®¢é˜…å¯èƒ½è¿˜æœªå»ºç«‹æˆ–æ›´æ–°å»¶è¿Ÿ</li>
            <li><strong>ä¿®å¤</strong>ï¼šåœ¨ <code>generate()</code> æ–¹æ³•ä¸­æ·»åŠ  <code>updateButtonUI()</code> è°ƒç”¨ï¼Œç«‹å³æ›´æ–°æŒ‰é’®çŠ¶æ€</li>
            <li><strong>ä½ç½®</strong>ï¼š
                <ul>
                    <li>ç”Ÿæˆå¼€å§‹æ—¶ï¼š<code>business-plan-generator.js:307</code></li>
                    <li>ç”Ÿæˆå®Œæˆæ—¶ï¼š<code>business-plan-generator.js:437</code></li>
                    <li>ç”Ÿæˆé”™è¯¯æ—¶ï¼š<code>business-plan-generator.js:473</code></li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="test-section">
        <h2>âœ… éªŒè¯æ­¥éª¤</h2>
        <ol>
            <li>ç‚¹å‡»"å•†ä¸šè®¡åˆ’ä¹¦"æˆ–"äº§å“ç«‹é¡¹ææ–™"æŒ‰é’®</li>
            <li>åœ¨å¼¹çª—ä¸­é€‰æ‹©ç« èŠ‚</li>
            <li>ç‚¹å‡»"å¼€å§‹ç”Ÿæˆ"</li>
            <li><strong>é¢„æœŸç»“æœ</strong>ï¼šå¼¹çª—å…³é—­åï¼ŒæŒ‰é’®ç«‹å³å˜ä¸º"â³ ç”Ÿæˆä¸­..."çŠ¶æ€</li>
            <li><strong>ä¹‹å‰çš„é—®é¢˜</strong>ï¼šæŒ‰é’®ä¿æŒåŸçŠ¶æ€ï¼Œéœ€è¦é‡æ–°æ‰“å¼€å¼¹çª—æ‰ä¼šæ›´æ–°</li>
        </ol>
    </div>

    <script>
        function addLog(message, type = 'info') {
            const log = document.getElementById('testLog');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        function testButtonStateChange(type, status) {
            const btnMap = {
                'business': 'businessPlanBtn',
                'proposal': 'proposalBtn'
            };

            const btnId = btnMap[type];
            const btn = document.getElementById(btnId);
            if (!btn) {
                addLog(`æŒ‰é’®ä¸å­˜åœ¨: ${btnId}`, 'error');
                return;
            }

            const iconSpan = btn.querySelector('.btn-icon');
            const textSpan = btn.querySelector('.btn-text');

            // ç§»é™¤æ‰€æœ‰çŠ¶æ€ç±»
            btn.classList.remove('btn-idle', 'btn-generating', 'btn-completed', 'btn-error');
            btn.disabled = false;

            // æ ¹æ®çŠ¶æ€æ›´æ–°æŒ‰é’®
            switch (status) {
                case 'idle':
                    btn.classList.add('btn-idle');
                    btn.dataset.status = 'idle';
                    if (iconSpan) iconSpan.textContent = type === 'business' ? 'ğŸ“Š' : 'ğŸ“‹';
                    if (textSpan) textSpan.textContent = type === 'business' ? 'å•†ä¸šè®¡åˆ’ä¹¦' : 'äº§å“ç«‹é¡¹ææ–™';
                    addLog(`æŒ‰é’®é‡ç½®ä¸ºåˆå§‹çŠ¶æ€: ${type}`, 'info');
                    break;

                case 'generating':
                    btn.classList.add('btn-generating');
                    btn.dataset.status = 'generating';
                    btn.disabled = false;
                    if (iconSpan) iconSpan.textContent = 'â³';
                    if (textSpan) textSpan.textContent = 'ç”Ÿæˆä¸­...';
                    addLog(`âœ… æŒ‰é’®çŠ¶æ€å·²æ›´æ–°ä¸º"ç”Ÿæˆä¸­": ${type}`, 'success');
                    break;

                case 'completed':
                    btn.classList.add('btn-completed');
                    btn.dataset.status = 'completed';
                    if (iconSpan) iconSpan.textContent = 'âœ…';
                    if (textSpan) textSpan.textContent = type === 'business' ? 'å•†ä¸šè®¡åˆ’ä¹¦ï¼ˆæŸ¥çœ‹ï¼‰' : 'äº§å“ç«‹é¡¹ææ–™ï¼ˆæŸ¥çœ‹ï¼‰';
                    addLog(`âœ… æŒ‰é’®çŠ¶æ€å·²æ›´æ–°ä¸º"å·²å®Œæˆ": ${type}`, 'success');
                    break;

                case 'error':
                    btn.classList.add('btn-error');
                    btn.dataset.status = 'error';
                    if (iconSpan) iconSpan.textContent = 'âŒ';
                    if (textSpan) textSpan.textContent = 'ç”Ÿæˆå¤±è´¥ï¼ˆé‡è¯•ï¼‰';
                    addLog(`âŒ æŒ‰é’®çŠ¶æ€å·²æ›´æ–°ä¸º"é”™è¯¯": ${type}`, 'error');
                    break;
            }
        }

        // åˆå§‹åŒ–æ—¥å¿—
        addLog('æµ‹è¯•é¡µé¢å·²åŠ è½½ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•æŒ‰é’®çŠ¶æ€å˜åŒ–', 'success');
    </script>
</body>
</html>
