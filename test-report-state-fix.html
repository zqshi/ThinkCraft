<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ¥å‘Šç”ŸæˆçŠ¶æ€æŒä¹…åŒ–æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }

        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 6px;
            border-left: 4px solid #4CAF50;
        }

        .test-section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .test-steps {
            list-style: none;
            padding-left: 0;
        }

        .test-steps li {
            padding: 10px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .test-steps li:last-child {
            border-bottom: none;
        }

        .step-number {
            display: inline-block;
            width: 24px;
            height: 24px;
            background: #4CAF50;
            color: white;
            text-align: center;
            line-height: 24px;
            border-radius: 50%;
            margin-right: 10px;
            font-size: 12px;
        }

        .verification-points {
            margin-top: 10px;
            padding-left: 34px;
        }

        .verification-points li {
            padding: 5px 0;
            color: #666;
            border: none;
        }

        .verification-points li::before {
            content: "â–¡";
            margin-right: 8px;
            color: #999;
        }

        .expected-result {
            margin-top: 10px;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 4px;
            font-size: 14px;
            color: #2e7d32;
        }

        .expected-result strong {
            display: block;
            margin-bottom: 5px;
        }

        .warning {
            background: #fff3cd;
            border-left-color: #ffc107;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        .warning strong {
            color: #856404;
        }

        .info {
            background: #d1ecf1;
            border-left-color: #17a2b8;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        .info strong {
            color: #0c5460;
        }

        .button-group {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #4CAF50;
            color: white;
        }

        .btn-primary:hover {
            background: #45a049;
        }

        .btn-secondary {
            background: #2196F3;
            color: white;
        }

        .btn-secondary:hover {
            background: #0b7dda;
        }

        .btn-danger {
            background: #f44336;
            color: white;
        }

        .btn-danger:hover {
            background: #da190b;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-pending {
            background: #ffc107;
            color: #856404;
        }

        .status-pass {
            background: #4CAF50;
            color: white;
        }

        .status-fail {
            background: #f44336;
            color: white;
        }

        .code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“‹ æŠ¥å‘Šç”ŸæˆçŠ¶æ€æŒä¹…åŒ–æµ‹è¯•</h1>
        <p class="subtitle">éªŒè¯ç¡¬åˆ·æ–°åç”ŸæˆçŠ¶æ€æ˜¯å¦æ­£ç¡®æ¢å¤</p>

        <div class="warning">
            <strong>âš ï¸ æµ‹è¯•å‰å‡†å¤‡</strong>
            <ul style="margin-top: 10px; padding-left: 20px;">
                <li>ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨ï¼ˆ<span class="code">cd backend && npm start</span>ï¼‰</li>
                <li>ç¡®ä¿å‰ç«¯æœåŠ¡å·²å¯åŠ¨ï¼ˆ<span class="code">python3 -m http.server 8000</span>ï¼‰</li>
                <li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰</li>
                <li>åˆ‡æ¢åˆ° Console æ ‡ç­¾é¡µæŸ¥çœ‹æ—¥å¿—</li>
            </ul>
        </div>

        <div class="info">
            <strong>â„¹ï¸ æµ‹è¯•è¯´æ˜</strong>
            <p>æœ¬æµ‹è¯•é¡µé¢ç”¨äºéªŒè¯æŠ¥å‘Šç”ŸæˆçŠ¶æ€æŒä¹…åŒ–ä¿®å¤æ˜¯å¦ç”Ÿæ•ˆã€‚è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ä¾æ¬¡æ‰§è¡Œæµ‹è¯•ã€‚</p>
        </div>

        <!-- æµ‹è¯•1 -->
        <div class="test-section">
            <h2>
                <span class="status-badge status-pending">å¾…æµ‹è¯•</span>
                æµ‹è¯•1ï¼šç¡¬åˆ·æ–°æ¢å¤ï¼ˆæ ¸å¿ƒæµ‹è¯•ï¼‰
            </h2>
            <ol class="test-steps">
                <li>
                    <span class="step-number">1</span>
                    æ‰“å¼€ä¸»åº”ç”¨ <a href="http://localhost:8000" target="_blank">http://localhost:8000</a>
                </li>
                <li>
                    <span class="step-number">2</span>
                    åˆ›å»ºä¸€ä¸ªæ–°å¯¹è¯ï¼Œè¾“å…¥ä¸€äº›æ¶ˆæ¯
                </li>
                <li>
                    <span class="step-number">3</span>
                    ç‚¹å‡»"ç”Ÿæˆå•†ä¸šè®¡åˆ’ä¹¦"æŒ‰é’®
                </li>
                <li>
                    <span class="step-number">4</span>
                    é€‰æ‹©ç« èŠ‚ï¼ˆè‡³å°‘é€‰æ‹©4ä¸ªç« èŠ‚ï¼‰å¹¶å¼€å§‹ç”Ÿæˆ
                </li>
                <li>
                    <span class="step-number">5</span>
                    <strong>ç­‰å¾…ç”Ÿæˆåˆ°ç¬¬2ä¸ªç« èŠ‚æ—¶</strong>ï¼ŒæŒ‰ <span class="code">Ctrl+Shift+R</span> ç¡¬åˆ·æ–°
                </li>
                <li>
                    <span class="step-number">6</span>
                    éªŒè¯ä»¥ä¸‹å†…å®¹ï¼š
                    <ul class="verification-points">
                        <li>æŒ‰é’®çŠ¶æ€æ˜¾ç¤ºä¸º"ç”Ÿæˆä¸­..."ï¼ˆâ³å›¾æ ‡ï¼‰</li>
                        <li>ç‚¹å‡»æŒ‰é’®ï¼Œè¿›åº¦å¼¹çª—æ˜¾ç¤º</li>
                        <li>ç¬¬1ä¸ªç« èŠ‚æ˜¾ç¤º"å·²å®Œæˆ"ï¼ˆâœ…å›¾æ ‡ï¼‰</li>
                        <li>ç¬¬2ä¸ªç« èŠ‚æ˜¾ç¤º"å·¥ä½œä¸­"ï¼ˆâ³å›¾æ ‡ï¼‰</li>
                        <li>æ•´ä½“è¿›åº¦æ˜¾ç¤ºæ­£ç¡®ï¼ˆä¾‹å¦‚ï¼š2/4 = 50%ï¼‰</li>
                    </ul>
                </li>
            </ol>
            <div class="expected-result">
                <strong>âœ… é¢„æœŸç»“æœï¼š</strong>
                ç¡¬åˆ·æ–°åï¼ŒæŒ‰é’®çŠ¶æ€ã€è¿›åº¦å¼¹çª—ã€ç« èŠ‚çŠ¶æ€éƒ½æ­£ç¡®æ¢å¤ï¼Œå·²å®Œæˆçš„ç« èŠ‚ä¸ä¸¢å¤±ã€‚
            </div>
        </div>

        <!-- æµ‹è¯•2 -->
        <div class="test-section">
            <h2>
                <span class="status-badge status-pending">å¾…æµ‹è¯•</span>
                æµ‹è¯•2ï¼šå…³é—­è¿›åº¦å¼¹çª—
            </h2>
            <ol class="test-steps">
                <li>
                    <span class="step-number">1</span>
                    å¼€å§‹ç”ŸæˆæŠ¥å‘Šï¼ˆå‚è€ƒæµ‹è¯•1çš„æ­¥éª¤1-4ï¼‰
                </li>
                <li>
                    <span class="step-number">2</span>
                    ç‚¹å‡»è¿›åº¦å¼¹çª—å³ä¸Šè§’çš„ X æŒ‰é’®å…³é—­
                </li>
                <li>
                    <span class="step-number">3</span>
                    åˆ·æ–°é¡µé¢ï¼ˆ<span class="code">F5</span>ï¼‰
                </li>
                <li>
                    <span class="step-number">4</span>
                    éªŒè¯ä»¥ä¸‹å†…å®¹ï¼š
                    <ul class="verification-points">
                        <li>æŒ‰é’®çŠ¶æ€æ¢å¤ä¸º"ç”Ÿæˆä¸­..."</li>
                        <li>ç‚¹å‡»æŒ‰é’®å¯ä»¥é‡æ–°æ‰“å¼€è¿›åº¦å¼¹çª—</li>
                        <li>è¿›åº¦å¼¹çª—æ˜¾ç¤ºæ­£ç¡®çš„ç« èŠ‚çŠ¶æ€</li>
                    </ul>
                </li>
            </ol>
            <div class="expected-result">
                <strong>âœ… é¢„æœŸç»“æœï¼š</strong>
                å…³é—­è¿›åº¦å¼¹çª—ååˆ·æ–°é¡µé¢ï¼ŒçŠ¶æ€æ­£ç¡®æ¢å¤ï¼Œå¯ä»¥é‡æ–°æ‰“å¼€è¿›åº¦å¼¹çª—æŸ¥çœ‹è¿›åº¦ã€‚
            </div>
        </div>

        <!-- æµ‹è¯•3 -->
        <div class="test-section">
            <h2>
                <span class="status-badge status-pending">å¾…æµ‹è¯•</span>
                æµ‹è¯•3ï¼šä¼šè¯åˆ‡æ¢
            </h2>
            <ol class="test-steps">
                <li>
                    <span class="step-number">1</span>
                    åœ¨ä¼šè¯ A ä¸­å¼€å§‹ç”Ÿæˆå•†ä¸šè®¡åˆ’ä¹¦
                </li>
                <li>
                    <span class="step-number">2</span>
                    åˆ›å»ºä¸€ä¸ªæ–°ä¼šè¯ B
                </li>
                <li>
                    <span class="step-number">3</span>
                    åˆ‡æ¢å›ä¼šè¯ A
                </li>
                <li>
                    <span class="step-number">4</span>
                    éªŒè¯ä»¥ä¸‹å†…å®¹ï¼š
                    <ul class="verification-points">
                        <li>ä¼šè¯ A çš„æŒ‰é’®çŠ¶æ€æ¢å¤ä¸º"ç”Ÿæˆä¸­..."</li>
                        <li>ç‚¹å‡»æŒ‰é’®å¯ä»¥æŸ¥çœ‹è¿›åº¦</li>
                        <li>ä¼šè¯ B çš„æŒ‰é’®çŠ¶æ€ä¸º"ç©ºé—²"ï¼ˆğŸ“Šå›¾æ ‡ï¼‰</li>
                    </ul>
                </li>
            </ol>
            <div class="expected-result">
                <strong>âœ… é¢„æœŸç»“æœï¼š</strong>
                ä¼šè¯åˆ‡æ¢æ—¶ï¼Œæ¯ä¸ªä¼šè¯çš„æŠ¥å‘Šç”ŸæˆçŠ¶æ€æ­£ç¡®ä¿å­˜å’Œæ¢å¤ï¼Œäº’ä¸å½±å“ã€‚
            </div>
        </div>

        <!-- æµ‹è¯•4 -->
        <div class="test-section">
            <h2>
                <span class="status-badge status-pending">å¾…æµ‹è¯•</span>
                æµ‹è¯•4ï¼šIndexedDB æ•°æ®éªŒè¯
            </h2>
            <ol class="test-steps">
                <li>
                    <span class="step-number">1</span>
                    å¼€å§‹ç”ŸæˆæŠ¥å‘Š
                </li>
                <li>
                    <span class="step-number">2</span>
                    æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
                </li>
                <li>
                    <span class="step-number">3</span>
                    åˆ‡æ¢åˆ° Application æ ‡ç­¾é¡µ
                </li>
                <li>
                    <span class="step-number">4</span>
                    å±•å¼€ IndexedDB â†’ ThinkCraft â†’ reports
                </li>
                <li>
                    <span class="step-number">5</span>
                    éªŒè¯ä»¥ä¸‹å†…å®¹ï¼š
                    <ul class="verification-points">
                        <li><span class="code">status</span> å­—æ®µä¸º 'generating'</li>
                        <li><span class="code">data.chapters</span> æ•°ç»„åŒ…å«å·²å®Œæˆçš„ç« èŠ‚</li>
                        <li><span class="code">progress</span> å¯¹è±¡åŒ…å«æ­£ç¡®çš„è¿›åº¦ä¿¡æ¯</li>
                        <li><span class="code">selectedChapters</span> æ•°ç»„åŒ…å«æ‰€æœ‰é€‰ä¸­çš„ç« èŠ‚</li>
                    </ul>
                </li>
            </ol>
            <div class="expected-result">
                <strong>âœ… é¢„æœŸç»“æœï¼š</strong>
                IndexedDB ä¸­çš„æ•°æ®ç»“æ„å®Œæ•´ï¼Œå®æ—¶æ›´æ–°ï¼Œä¸å†…å­˜çŠ¶æ€ä¸€è‡´ã€‚
            </div>
        </div>

        <!-- æµ‹è¯•5 -->
        <div class="test-section">
            <h2>
                <span class="status-badge status-pending">å¾…æµ‹è¯•</span>
                æµ‹è¯•5ï¼šæ‰€æœ‰ç« èŠ‚å®Œæˆä½†çŠ¶æ€æœªæ›´æ–°
            </h2>
            <ol class="test-steps">
                <li>
                    <span class="step-number">1</span>
                    ç­‰å¾…æŠ¥å‘Šç”Ÿæˆå®Œæˆï¼ˆæ‰€æœ‰ç« èŠ‚éƒ½å®Œæˆï¼‰
                </li>
                <li>
                    <span class="step-number">2</span>
                    åœ¨ IndexedDB ä¸­æ‰‹åŠ¨å°† <span class="code">status</span> æ”¹ä¸º 'generating'
                </li>
                <li>
                    <span class="step-number">3</span>
                    åˆ·æ–°é¡µé¢
                </li>
                <li>
                    <span class="step-number">4</span>
                    éªŒè¯ä»¥ä¸‹å†…å®¹ï¼š
                    <ul class="verification-points">
                        <li>çŠ¶æ€è‡ªåŠ¨æ›´æ–°ä¸º 'completed'</li>
                        <li>æŒ‰é’®æ˜¾ç¤º"æŸ¥çœ‹å•†ä¸šè®¡åˆ’ä¹¦"ï¼ˆâœ…å›¾æ ‡ï¼‰</li>
                        <li>ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºæŠ¥å‘ŠæŸ¥çœ‹å¼¹çª—</li>
                    </ul>
                </li>
            </ol>
            <div class="expected-result">
                <strong>âœ… é¢„æœŸç»“æœï¼š</strong>
                ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤çŠ¶æ€ä¸ä¸€è‡´é—®é¢˜ï¼ŒæŒ‰é’®çŠ¶æ€æ­£ç¡®ï¼ŒæŠ¥å‘Šå¯ä»¥æ­£å¸¸æŸ¥çœ‹ã€‚
            </div>
        </div>

        <div class="button-group">
            <button class="btn btn-primary" onclick="window.open('http://localhost:8000', '_blank')">
                ğŸš€ æ‰“å¼€ä¸»åº”ç”¨
            </button>
            <button class="btn btn-secondary" onclick="window.open('http://localhost:3000/health', '_blank')">
                ğŸ” æ£€æŸ¥åç«¯çŠ¶æ€
            </button>
            <button class="btn btn-danger" onclick="if(confirm('ç¡®å®šè¦æ¸…ç©º IndexedDB æ•°æ®å—ï¼Ÿ')) { clearIndexedDB(); }">
                ğŸ—‘ï¸ æ¸…ç©ºæµ‹è¯•æ•°æ®
            </button>
        </div>
    </div>

    <script>
        // æ¸…ç©º IndexedDB æ•°æ®
        async function clearIndexedDB() {
            try {
                const dbs = await window.indexedDB.databases();
                for (const db of dbs) {
                    if (db.name === 'ThinkCraft') {
                        window.indexedDB.deleteDatabase(db.name);
                        alert('âœ… IndexedDB æ•°æ®å·²æ¸…ç©ºï¼è¯·åˆ·æ–°ä¸»åº”ç”¨ã€‚');
                        return;
                    }
                }
                alert('âš ï¸ æœªæ‰¾åˆ° ThinkCraft æ•°æ®åº“');
            } catch (error) {
                alert('âŒ æ¸…ç©ºå¤±è´¥: ' + error.message);
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥åç«¯çŠ¶æ€
        window.addEventListener('load', async () => {
            try {
                const response = await fetch('http://localhost:3000/health');
                if (response.ok) {
                    console.log('âœ… åç«¯æœåŠ¡æ­£å¸¸');
                } else {
                    console.warn('âš ï¸ åç«¯æœåŠ¡å¼‚å¸¸');
                }
            } catch (error) {
                console.error('âŒ æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡:', error.message);
            }
        });
    </script>
</body>
</html>
