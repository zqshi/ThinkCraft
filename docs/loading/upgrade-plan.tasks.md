# 升级方案实施任务清单（按顺序）

> 目标：支持外部用户稳定执行真实测试与部署，具备隔离、可观测与可回滚。

## Phase 0：准备与基线（1-2天）
1. 确认执行环境
   - 选项：本机、Docker、K8s
   - 产出：执行环境说明 + 资源配额
2. 明确部署目标
   - 预期产物：可访问 URL、日志、版本信息
   - 产出：部署目标与验收标准
3. 基线检查
   - 校验模板缺失、API Key、必要环境变量
   - 产出：缺口清单

## Phase 1：真实执行闭环（1-2周）
1. 任务队列
   - 新增任务模型（Job）
   - API：创建任务、查询任务、取消任务
2. 测试阶段真实执行
   - 执行 `npm test`（根）+ `npm test`（backend）
   - 产出：真实 test-report（含日志、统计）
3. 部署阶段真实执行
   - 执行 `scripts/start-prod.sh`
   - 产出：deploy-doc（真实日志）+ release-notes
4. 前端状态与日志
   - 阶段执行中/失败/成功状态展示
   - 日志查看/下载入口

## Phase 2：多租户与生产保障（2-4周）
1. 执行隔离
   - 容器池或独立工作区
   - 任务间资源隔离
2. 资源配额与超时
   - CPU/内存/时间限制
   - 超时自动终止
3. 回滚与审计
   - 失败自动回滚
   - 审计日志保存

## 验收清单
- 外部用户可正常执行测试与部署
- 日志可追踪，失败可重试
- 不同用户任务互不影响
