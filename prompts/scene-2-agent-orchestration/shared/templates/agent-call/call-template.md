# Agent 调用最小化 Prompt 模板（防越界版）

**使用场景**：协调者调用 Agent 时使用的标准 Prompt 结构

**设计原则**：

1. **最小化原则**：只包含 Agent 完成任务所需的必要信息，不包含任何指导性、建议性内容
2. **防越界原则**：严格遵守职责边界，不替 Agent 决定"怎么做"
3. **信息完整原则**：确保 5W1H 信息完整，Agent 无需猜测或假设

---

## 标准结构模板

```markdown
## 【调用元信息】

- **被调用 Agent**: {agent_name}
- **所处阶段**: {stage_name}
- **所处环节**: {step_name}
- **调用类型**: [首次调用 | 第 N 次调用 | 单次任务]

---

## 【协作上下文】

### 您在流程中的位置

{简要说明当前在整体流程中的位置，1-2 句话}

### 本次调用的目的

{明确说明为什么调用您，期望您做什么，1-2 句话}

### 调用模式说明

**如果是单次任务**：

- 本次调用完成任务后即结束
- 您的输出将被：{如何使用，例如"完整呈现给用户"、"作为下一阶段的输入文档"}
- 后续流程：{简要说明后续由协调者如何处理}

**如果是多轮任务的第 N 轮**：

- 这是第 {N} 轮调用
- 上一轮您做了：{上轮任务摘要}
- 本轮您需要做：{本轮任务摘要}
- 下一轮调用的触发条件：{什么情况下会再次调用您}
- 下一轮会提供的信息：{列出会提供的信息类型}

### 边界约束

- ✅ 您需要做：{明确的任务范围}
- ❌ 您无需做：{明确排除的行为，如"无需等待用户回复"、"无需调用其他 Agent"}
- ⚠️ 特别注意：{容易混淆的点}

---

## 【任务依赖信息】

### 用户原始输入（如适用）

{完整内容，一字不差}

### 依赖文件（如适用）

**文件 1**: {路径}
**说明**: 请使用 Read 工具读取该文件的完整内容

**文件 2**: {路径}（如有多个文件）
**说明**: 请使用 Read 工具读取该文件的完整内容

### 历史交互（如适用）

{完整的历史问答、澄清记录等}

---

## 【本次任务】

{具体的、可执行的、边界清晰的任务描述}

**核心原则**：

- ✅ 仅描述"做什么"（要达成什么结果）
- ❌ 不描述"怎么做"（用什么方法/维度/框架/章节）
- ✅ 可提及可用的方法论选项（如"可使用 SWOT、JTBD 等方法论"）
- ❌ 不可列出"应该包含的内容清单/维度清单/章节清单"

**违规检测**：

- 如果出现"帮助理解/覆盖/分析：- xxx - xxx"结构 → 立即删除列表部分
- 如果出现"从以下角度/维度/方面：1. 2. 3." → 立即删除列表部分

---

## 【输出要求】

- **输出类型**: [问题列表 | 分析报告 | 文档 | 决策判断]
- **输出格式**: {格式要求，如 Markdown、JSON 等}
- **文件要求**（如生成文档）:
  - 命名规范: {规范，如"需求澄清分析文档-v{YYYYMMDDHHmmss}.md"}
  - 存放路径: {路径，如"ProductManagerDoc/demand-clarify-analysis-doc/"}
  - 版本号规则: 使用时间戳 YYYYMMDDHHmmss
- **模板要求**（如生成文档）:
  - 请查阅共享模板库选择合适的文档模板
  - 严格按照模板的章节结构和格式要求组织文档
- **合规要求**: 严格执行文档元信息与合规自检流程

---

## 【禁止事项】

❌ 不要等待用户回复（您是单次调用，完成输出后任务即结束，我会收集回复）
❌ 不要调用其他 Agent（这是协调者的职责）
❌ 不要假设历史信息（所有必要信息都在上方"任务依赖信息"中）
❌ 不要覆盖已有文档（必须使用新的时间戳版本号）
❌ 不要涉及技术实现细节（架构、技术栈、API、部署等技术实现内容）
```

---

## 使用说明

### 1. 调用前自检清单

- [ ] 5W1H 信息是否完整？（Who/Where/When/What/Why/How）
- [ ] 用户原始需求是否完整复制（一字不差）？
- [ ] 是否存在"引导性动词 + 列表"违规模式？
- [ ] 是否使用了"详见上文"等省略表述？
- [ ] 依赖文件是否提供路径和读取说明？

### 2. 快速调用示例

**示例 1：需求澄清（首次调用）**

```markdown
## 【本次任务】

请基于上述用户需求，运用您的专业方法论生成需求澄清问题列表，确保充分理解需求。
```

**示例 2：竞品分析（单次任务）**

```markdown
## 【本次任务】

请对竞品进行深度分析，运用您的竞品分析方法论（如 SWOT、定位矩阵等）输出分析报告。
```

**示例 3：质量挑战（单次任务）**

```markdown
## 【本次任务】

请对需求设计文档进行质量挑战，运用您的质量审查方法论识别问题并提出改进建议。
```

### 3. 常见错误与修正

| ❌ 错误表述                 | 问题     | ✅ 正确表述                |
| --------------------------- | -------- | -------------------------- |
| "帮助理解：- A - B - C"     | 指定维度 | "确保充分理解需求"         |
| "从以下角度分析：1. 2. 3."  | 限定框架 | "运用专业方法论分析"       |
| "文档应包含：第一章 第二章" | 指定结构 | "请查阅模板库选择合适模板" |
