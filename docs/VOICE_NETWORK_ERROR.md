# 语音识别网络错误解决方案

## 问题说明

语音识别功能依赖 **Web Speech API**，该API需要连接到Google的语音识别服务器。

## 错误原因

出现"网络错误"可能是以下原因：

### 1. 网络连接问题
- 设备未连接网络
- 网络不稳定
- 信号弱

### 2. 无法访问Google服务
- 在中国大陆，Google服务被限制访问
- 防火墙或网络策略阻止
- 企业网络限制

### 3. 浏览器限制
- 某些浏览器版本的限制
- 隐私设置过于严格

## 解决方案

### 方案1: 检查网络连接 ✅
```bash
# 测试网络连接
ping google.com

# 或在浏览器中访问
https://www.google.com
```

### 方案2: 使用VPN或代理 🌐
如果在中国大陆，需要：
1. 使用VPN连接到海外网络
2. 确保VPN稳定连接
3. 重新尝试语音输入

### 方案3: 切换到文字输入 ⌨️
如果无法解决网络问题：
1. 点击"切换文字输入"按钮
2. 使用键盘输入文字
3. 功能完全相同，只是输入方式不同

### 方案4: 更换网络环境 📶
- 切换到移动数据网络
- 更换WiFi网络
- 使用热点共享

### 方案5: 使用支持的浏览器 🌐
确保使用以下浏览器：
- Chrome (推荐)
- Edge
- Safari (iOS/macOS)

## 技术说明

### Web Speech API的工作原理
```
用户说话 → 麦克风采集 → 发送到Google服务器 → 语音识别 → 返回文字
                                    ↑
                              需要网络连接
```

### 为什么需要网络？
- 语音识别计算量大，需要云端处理
- 本地设备性能不足以实时识别
- Google提供免费的云端识别服务

## 替代方案

### 1. 使用文字输入（推荐）
- 无需网络连接到Google
- 响应速度更快
- 更精确的表达

### 2. 等待离线语音识别
- 浏览器正在开发离线语音识别
- 目前还不成熟
- 未来可能支持

### 3. 使用其他语音输入工具
- 系统自带的语音输入
- 第三方输入法的语音功能
- 然后粘贴到输入框

## 快速诊断

### 检查清单
- [ ] 设备已连接网络
- [ ] 可以访问Google.com
- [ ] 浏览器支持语音识别
- [ ] 麦克风权限已授予
- [ ] 没有使用企业网络限制

### 测试步骤
1. 打开 `test-voice-permission.html`
2. 点击"测试语音识别"
3. 查看具体错误信息
4. 根据错误类型解决

## 常见问题

### Q: 为什么在中国大陆无法使用？
A: Web Speech API依赖Google服务，在中国大陆被限制。需要使用VPN或切换到文字输入。

### Q: 有没有不需要Google的语音识别？
A: 目前浏览器标准的Web Speech API都依赖Google。可以考虑：
- 使用文字输入
- 集成其他语音识别服务（需要后端支持）
- 等待浏览器支持离线识别

### Q: 移动端也有这个问题吗？
A: 是的，移动端浏览器的Web Speech API也需要连接Google服务。

### Q: 能否使用国内的语音识别服务？
A: 可以，但需要：
1. 后端集成国内语音识别API（如百度、讯飞）
2. 修改前端代码调用后端接口
3. 需要额外的开发工作

## 推荐做法

**对于中国大陆用户：**
1. 优先使用文字输入 ⌨️
2. 或使用系统语音输入后粘贴
3. 如有VPN可尝试语音输入

**对于海外用户：**
1. 直接使用语音输入 🎤
2. 确保网络连接稳定
3. 授予麦克风权限

## 更新日志

- 2026-01-31: 添加网络状态检测
- 2026-01-31: 改进错误提示信息
- 2026-01-31: 添加离线检测
- 2026-01-31: 提供详细的解决方案

## 相关文档

- Web Speech API: https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API
- 浏览器兼容性: https://caniuse.com/speech-recognition
